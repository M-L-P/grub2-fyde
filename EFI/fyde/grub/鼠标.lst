###############################################################################
#                                 [鼠标.lst]
#                          to list items of mouse
###############################################################################

#==============================================================================
#####----{功能}----
#------------------------------------------------------------------------------
function save_mouse {
	refresh_lang
	refresh_theme
	configfile ${prefix}/鼠标.lst
}
#------------------------------------------------------------------------------
function enable_usb {
	insmod efi_mouse
	terminal_input --append mouse
	export USB_MOUSE=开
}
#------------------------------------------------------------------------------
function disable_usb {
	terminal_input --remove mouse
	rmmod efi_mouse
	export USB_MOUSE=关
}
#------------------------------------------------------------------------------
function enable_ps2 {
	insmod ps2mouse
	terminal_input --append ps2mouse
	export PS2_MOUSE=开
}
#------------------------------------------------------------------------------
function disable_ps2 {
	terminal_input --remove ps2mouse
	rmmod ps2mouse
	export PS2_MOUSE=关
}
#------------------------------------------------------------------------------
function load_mouse {
	if [ "开" = "${USB_MOUSE}" ]; then
		set LOAD_USB_MOUSE=enable_usb
	fi
	if [ "开" = "${PS2_MOUSE}" ]; then
		set LOAD_PS2_MOUSE=enable_ps2
	fi
}
#==============================================================================
default=${SELECTED}
#==============================================================================
#####----{返回}----
#------------------------------------------------------------------------------
menuentry "${MENU_BACK}" --class "启事/返回" --hotkey "esc" {
	set SELECTED=鼠标
	configfile ${prefix}/设置/2.设置.lst
}
#==============================================================================

#==============================================================================
#####----{条目}----
#------------------------------------------------------------------------------
menuentry "USB ${MENU_MOUSE}" --class "开关/${USB_MOUSE}" --id "USB" {
	if [ "开" != "${USB_MOUSE}" ]; then
		enable_usb
	else
		disable_usb
	fi
	save_env USB_MOUSE
	set SELECTED=USB
	save_mouse
}
#------------------------------------------------------------------------------
menuentry "PS/2 ${TITLE_TRACKPAD} & ${MENU_MOUSE}" --class "开关/${PS2_MOUSE}" --id "PS2" {
	if [ "开" != "${PS2_MOUSE}" ]; then
		enable_ps2
	else
		disable_ps2
	fi
	save_env PS2_MOUSE
	set SELECTED=PS2
	save_mouse
}
#==============================================================================